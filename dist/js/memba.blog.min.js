/*! memba.blog 13-01-2014 */

!function(a){"use strict";var b=Function,c=b("return this")(),d=c.app=c.app||{};d.constants=a.extend(d.constants||{},{URN:"urn:",COLON:":",DEFAULT_GUID:"00000000-0000-0000-0000-000000000000",MARKDOWN_EXT:".md",PATH_SEP:"/",PAGE_SIZE:"pageSize",DEFAULT_PAGE_SIZE:5,DATE_FORMAT:"dd MMM yyyy"}),d.types=a.extend(d.types||{},{BOOLEAN:"boolean",DATE:"date",FUNCTION:"function",NUMBER:"number",OBJECT:"object",STRING:"string",UNDEFINED:"undefined"}),d.hrefs=a.extend(d.hrefs||{},{ARCHIVE:"./archive/",RSS:"index.rss",INDEX:"./index.html",HEADER:"./header.tmpl.html",FOOTER:"./footer.tmpl.html"}),d.routes=a.extend(d.routes||{},{HASH:"#",HOME:"/",CATEGORY:"/category/:category",CATEGORY_PARAMETER:":category",ARCHIVE:"/archive/:period",PERIOD_PARAMETER:":period",DETAIL:"/blog/:period/:slug",SLUG_PARAMETER:":slug",GUID:"/guid/:guid",GUID_PARAMETER:":guid",SEARCH:"/search",FAQS:"/faqs"}),d.events=a.extend(d.events||{},{CHANGE:"change",CLICK:"click",DBLCLICK:"dblclick",DRAGSTART:"dragstart",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",INITIALIZE:"initialize",KEYUP:"keyup"}),d.tags=a.extend(d.tags||{},{BODY:"body",DATA_COLUMNS:"data-columns",DIV:"div",DIV_ELEMENT:"<div/>",ID:"id",INPUT:"input",INPUT_ELEMENT:"<input/>",PLACEHOLDER:"placeholder",SPAN:"span",SPAN_ELEMENT:"<span/>",TEXTAREA:"textarea",TEXTAREA_ELEMENT:"<textarea/>"}),d.elements=a.extend(d.elements||{},{strip:function(a){return typeof a===d.types.STRING&&"#"===a.charAt(0)?a.substr(1):a},APPLICATION_ROOT:"#application",APPLICATION_LAYOUT:"#application-layout",APPLICATION_HEADER:"#application-header",APPLICATION_CONTAINER:"#application-container",APPLICATION_FOOTER:"#application-footer",CONTENT_SECTION:"#content",HEADER_VIEW:"#header-view",HEADER_VIEW_NAVBAR_BRAND:"#header-view-navbar-brand",HEADER_VIEW_SEARCH_INPUT:"#header-view-navbar-search-input",HEADER_VIEW_SEARCH_BUTTON:"#header-view-navbar-search-button",HEADER_VIEW_NAVBAR_TOGGLE:"#header-view-navbar-toggle",HEADER_VIEW_NAVBAR_SEARCH_INPUT:"#header-view-navbar-search-input",HEADER_VIEW_NAVBAR_SEARCH_BUTTON:"#header-view-navbar-search-button",HEADER_VIEW_NAVBAR_MENU:"#header-view-navbar-menu",FOOTER_VIEW:"#footer-view",FOOTER_VIEW_COPYRIGHT:"#footer-view-copyright",ALL_POSTS_SECTION:"#all-posts",ALL_POSTS_SECTION_TITLE:"#all-posts-title > a",CATEGORIES_SECTION:"#categories",CATEGORIES_SECTION_TITLE:"#categories-title",CATEGORIES_VIEW:"#categories-view",ARCHIVE_SECTION:"#archive",ARCHIVE_SECTION_TITLE:"#archive-title",ARCHIVE_VIEW:"#archive-view",RSS_SECTION:"#rss",RSS_SECTION_TITLE:"#rss-title > a",LIST_VIEW:"#list-view",INDEX_LIST_TEMPLATE:"#index-list-template",ARTICLE_READMORE:"div.readmore > div.pull-right > a",INDEX_PAGER:"#index-pager",INDEX_PAGER_SIZES:"span.k-pager-sizes select",DETAIL_VIEW:"#detail-view",SEARCH_VIEW:"#search-view",FAQS_VIEW:"#faqs-view",DUMMY:"dummy"})}(jQuery),function(a,b){"use strict";var c=Function,d=c("return this")(),e=d.kendo,f=d.app,g=f.constants,h=f.elements,i=f.events,j=f.hrefs,k=f.routes,l=f.tags,m=f.types,n=!0,o="app.controller.js: ",p={set:function(a,b){Modernizr.localstorage&&(d.localStorage[a]=b)},get:function(a){return Modernizr.localstorage?d.localStorage[a]:b}};a(document).bind(i.INITIALIZE,function(){f.localize(f.resources);var b=new e.Layout(h.APPLICATION_LAYOUT),c=new e.View(h.HEADER_VIEW,{model:f.searchViewModel}),l=new e.View(h.FOOTER_VIEW),m=new e.View(h.CATEGORIES_VIEW,{model:f.categoriesViewModel}),q=new e.View(h.ARCHIVE_VIEW,{model:f.archiveViewModel}),r=new e.View(h.LIST_VIEW,{model:f.listViewModel}),s=new e.View(h.DETAIL_VIEW,{model:f.detailViewModel}),t=new e.View(h.SEARCH_VIEW,{model:f.searchViewModel}),u=new e.Router({init:function(){b.render(h.APPLICATION_ROOT),b.showIn(h.APPLICATION_HEADER,c),b.showIn(h.APPLICATION_FOOTER,l),b.showIn(h.CATEGORIES_SECTION,m),b.showIn(h.ARCHIVE_SECTION,q)},change:function(a){n&&d.console&&d.console.log(o+"Open view "+a.url)},routeMissing:function(a){n&&d.console&&d.console.log(o+"Route missing at "+a.url)}});u.route(k.HOME,function(){var a=f.listViewModel.get("list");a.filter(null),a.pageSize(p.get(g.PAGE_SIZE)||g.DEFAULT_PAGE_SIZE),b.showIn(h.CONTENT_SECTION,r)}),u.route(k.CATEGORY,function(a){var c=f.listViewModel.get("list");c.filter({field:"category",operator:"eq",value:a}),c.pageSize(p.get(g.PAGE_SIZE)||g.DEFAULT_PAGE_SIZE),b.showIn(h.CONTENT_SECTION,r)}),u.route(k.ARCHIVE,function(a){var c=f.listViewModel.get("list");a.length<6?c.filter({field:"period",operator:"startswith",value:a}):c.filter({field:"period",operator:"eq",value:a}),c.pageSize(p.get(g.PAGE_SIZE)||g.DEFAULT_PAGE_SIZE),b.showIn(h.CONTENT_SECTION,r)}),u.route(k.DETAIL,function(a,c){var d=f.listViewModel.get("list"),i=jQuery.grep(d.data(),function(b){return b.link.indexOf(a+g.PATH_SEP+c)>0});i.length>0&&(f.detailViewModel.set("contentUrl",j.ARCHIVE+a+g.PATH_SEP+c+g.MARKDOWN_EXT),f.detailViewModel.set("title",i[0].title),f.detailViewModel.set("author",i[0].author),f.detailViewModel.set("pubDate",e.toString(i[0].pubDate,g.DATE_FORMAT)),b.showIn(h.CONTENT_SECTION,s))}),u.route(k.GUID,function(a){var c=f.listViewModel.get("list"),d=c.get(a);if(d){var i=new RegExp(k.HASH+k.DETAIL.replace(k.PERIOD_PARAMETER,"([^/]+)").replace(k.SLUG_PARAMETER,"([^/]+)")+"$"),l=i.exec(d.link);f.detailViewModel.set("url",j.ARCHIVE+l[1]+g.PATH_SEP+l[2]+g.MARKDOWN_EXT),f.detailViewModel.set("title",d.title),f.detailViewModel.set("author",d.author),f.detailViewModel.set("pubDate",e.toString(d.pubDate,g.DATE_FORMAT)),b.showIn(h.CONTENT_SECTION,s)}}),u.route(k.SEARCH,function(){b.showIn(h.CONTENT_SECTION,t)}),u.start(),a(h.HEADER_VIEW_SEARCH_INPUT).bind(i.KEYUP,function(b){a(b.target).val().trim().length>0?a(h.HEADER_VIEW_SEARCH_BUTTON).removeClass("disabled"):a(h.HEADER_VIEW_SEARCH_BUTTON).addClass("disabled")}),a(h.HEADER_VIEW_SEARCH_BUTTON).bind(i.CLICK,function(){u.navigate(k.SEARCH)}),t.bind("show",function(){a.noop()}),a(h.INDEX_PAGER).find(h.INDEX_PAGER_SIZES).bind(i.CHANGE,function(a){p.set(g.PAGE_SIZE,e.parseInt(a.target.value))})}),a(document).ready(function(){a.when(a.ajax(j.HEADER),a.ajax(j.FOOTER)).then(function(b,c){a(l.BODY).append(b[0]),a(l.BODY).append(c[0]),a(document).trigger(i.INITIALIZE)},function(b,c,e){n&&d.console&&a.type(d.console.error)===m.FUNCTION&&d.console.error(o+j.HEADER+" or "+j.FOOTER+" "+e)})})}(jQuery),function(){"use strict";var a=Function,b=a("return this")(),c=b.Modernizr,d="2013.3.1119",e=!0,f="app.init.js: ";e&&b.console&&(b.console.log(f+b.navigator.userAgent),b.console.log(f+b.location.href)),c.load([{load:"http://code.jquery.com/jquery-1.9.1.min.js",callback:function(a){e&&b.console&&b.console.log(f+a+" loading attempt")},complete:function(){b.jQuery||c.load("./js/"+d+"/jquery.min.js")}},{load:["http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css","http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css","http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"],callback:function(a){e&&b.console&&b.console.log(f+a+" loading attempt")},complete:function(){!$||$.fn.affix&&$.fn.carousel&&$.fn.popover&&$.fn.tab&&$.fn.tooltip||c.load([{load:["./styles/vendor/font-awesome.css","./styles/vendor/bootstrap.css","./js/vendor/bootstrap.min.js"]}])}},{load:["http://cdn.kendostatic.com/"+d+"/styles/kendo.common-bootstrap.min.css","http://cdn.kendostatic.com/"+d+"/styles/kendo.bootstrap.min.css","http://cdn.kendostatic.com/"+d+"/js/kendo.web.min.js","http://cdn.kendostatic.com/"+d+"/js/cultures/kendo.culture.en.min.js","http://cdn.kendostatic.com/"+d+"/js/cultures/kendo.culture."+(b.navigator.userLanguage||b.navigator.language).substr(0,2)+".min.js","http://cdn.kendostatic.com/"+d+"/js/cultures/kendo.culture.fr.min.js"],callback:function(a){e&&b.console&&b.console.log(f+a+" loading attempt")},complete:function(){b.kendo||c.load([{load:["./styles/"+d+"/kendo.common-bootstrap.min.css","./styles/"+d+"/kendo.bootstrap.min.css","./js/"+d+"/kendo.web.min.js","./js/"+d+"/cultures/kendo.culture.en.min.js","./js/"+d+"/cultures/kendo.culture."+(b.navigator.userLanguage||b.navigator.language).substring(0,2)+".min.js","./js/"+d+"/cultures/kendo.culture.fr.min.js"]}])}},{load:["http://yandex.st/highlightjs/7.5/styles/solarized_light.min.css","http://yandex.st/highlightjs/7.5/highlight.min.js","http://cdnjs.cloudflare.com/ajax/libs/marked/0.2.9/marked.min.js","./styles/vendor/memba.widgets.min.css","./js/vendor/memba.widgets.min.js"],callback:function(a){e&&b.console&&b.console.log(f+a+" loading attempt")},complete:function(){b.hljs||c.load([{load:["./styles/vendor/highlight/solarized_light.min.css","./js/vendor/highlight.min.js"]}]),b.marked||c.load("./js/vendor/marked.js")}},{load:["./styles/app.css","./js/app.constants.js","./js/cultures/app.culture.en.js","./js/cultures/app.culture."+(b.navigator.userLanguage||b.navigator.language).substring(0,2)+".js","./js/cultures/app.culture.fr.js","./js/app.localizer.js","./js/app.viewmodels.js","./js/app.controller.js"],callback:function(a){e&&b.console&&b.console.log(f+a+" loading attempt")}}])}(),function(a){"use strict";var b=Function,c=b("return this")(),d=c.kendo,e=c.app,f=e.elements,g=e.tags,h=!0,i="app.localizer.js: ",j="<wrap>",k="</wrap>";e.localize=function(b){if(h&&c.console&&(c.console.log(i+"external templates should be loaded before starting localization"),c.console.log(i+"starting localization in "+(c.navigator.userLanguage||c.navigator.language))),d.culture(b.LOCALE||(c.navigator.userLanguage||c.navigator.language).substr(0,2)),1===a(f.APPLICATION_LAYOUT).length){var e=a(j+a(f.APPLICATION_LAYOUT).html()+k);e.find(f.ALL_POSTS_SECTION_TITLE).html(b.ALL_POSTS_SECTION_TITLE),e.find(f.RSS_SECTION_TITLE).html(b.RSS_SECTION_TITLE),a(f.APPLICATION_LAYOUT).html(e.html())}if(1===a(f.HEADER_VIEW).length){var e=a(j+a(f.HEADER_VIEW).html()+k);e.find(f.HEADER_VIEW_NAVBAR_BRAND).html(b.HEADER_VIEW_NAVBAR_BRAND),e.find(f.HEADER_VIEW_NAVBAR_TOGGLE).html(b.HEADER_VIEW_NAVBAR_TOGGLE),Modernizr.input.placeholder&&e.find(f.HEADER_VIEW_NAVBAR_SEARCH_INPUT).attr(g.PLACEHOLDER,b.HEADER_VIEW_NAVBAR_SEARCH_INPUT),e.find(f.HEADER_VIEW_NAVBAR_SEARCH_BUTTON).html(b.HEADER_VIEW_NAVBAR_SEARCH_BUTTON);var l=e.find(f.HEADER_VIEW_NAVBAR_MENU);a.each(b.HEADER_VIEW_NAVBAR_MENU,function(b,c){var d=a('<li class="dropdown"></li>');d.append('<a href="#" class="dropdown-toggle" data-toggle="dropdown">'+c.text+'<b class="caret"></b></a>');var e=a('<ul class="dropdown-menu"></ul>');a.each(c.items,function(a,b){b.text&&b.href?e.append('<li><a href="'+b.href+'">'+b.text+"</a></li>"):e.append('<li class="divider"></li>')}),d.append(e),l.append(d)}),a(f.HEADER_VIEW).html(e.html())}if(1===a(f.FOOTER_VIEW).length){var e=a(j+a(f.FOOTER_VIEW).html()+k);e.find(f.FOOTER_VIEW_COPYRIGHT).html(b.FOOTER_VIEW_COPYRIGHT),a(f.FOOTER_VIEW).html(e.html())}if(1===a(f.CATEGORIES_VIEW).length){var e=a(j+a(f.CATEGORIES_VIEW).html()+k);e.find(f.CATEGORIES_SECTION_TITLE).html(b.CATEGORIES_SECTION_TITLE),a(f.CATEGORIES_VIEW).html(e.html())}if(1===a(f.ARCHIVE_VIEW).length){var e=a(j+a(f.ARCHIVE_VIEW).html()+k);e.find(f.ARCHIVE_SECTION_TITLE).html(b.ARCHIVE_SECTION_TITLE),a(f.ARCHIVE_VIEW).html(e.html())}if(1===a(f.INDEX_LIST_TEMPLATE).length){var e=a(j+a(f.INDEX_LIST_TEMPLATE).html()+k);e.find(f.ARTICLE_READMORE).html(b.ARTICLE_READMORE),a(f.INDEX_LIST_TEMPLATE).html(e.html())}}}(jQuery),function(a){"use strict";var b=Function,c=b("return this")(),d=c.kendo,e=c.app,f=e.constants,g=e.hrefs,h=e.routes,i=e.types,j=!0,k="app.index.viewmodels.js: ",l=(d.data.Model.define({}),new d.data.DataSource({})),m=new d.data.DataSource({}),n=new d.data.DataSource({}),o=new d.data.DataSource({transport:{read:{url:g.ARCHIVE+g.RSS,dataType:"xml"}},schema:{type:"xml",data:"/rss/channel/item",model:{id:"guid",fields:{guid:{field:"guid/text()",type:i.STRING,editable:!1,defaultValue:f.DEFAULT_GUID,parse:function(a){if(0===a.indexOf(f.URN)){var b=a.substr(f.URN.length).indexOf(f.COLON);if(b>0)return a.substr(f.URN.length+b+1)}return a}},title:{field:"title/text()",type:i.STRING,editable:!1},link:{field:"link/text()",type:i.STRING,editable:!1},description:{field:"description/text()",type:i.STRING,editable:!1},enclosure:{field:"enclosure/@url",type:i.STRING,editable:!1},author:{field:"author/text()",type:i.STRING,editable:!1},pubDate:{field:"pubDate/text()",type:i.DATE,editable:!1,parse:function(a){return j&&c.console.log&&c.console.log(k+"parse value "+a),d.parseDate(a)}},displayPeriod:{field:"pubDate/text()",type:i.STRING,editable:!1,parse:function(a){var b=d.parseDate(a);return d.toString(b,"Y",e.resources.LOCALE)}},period:{field:"pubDate/text()",type:i.STRING,editable:!1,parse:function(a){var b=d.parseDate(a);return d.toString(b,"yyyyMM")}},periodLink:{field:"pubDate/text()",type:i.STRING,editable:!1,parse:function(a){var b=d.parseDate(a);return g.INDEX+h.HASH+h.ARCHIVE.replace(h.PERIOD_PARAMETER,encodeURIComponent(d.toString(b,"yyyyMM")))}},category:{field:"category/text()",type:i.STRING,editable:!1},categoryLink:{field:"category/text()",type:i.STRING,editable:!1,parse:function(a){return g.INDEX+h.HASH+h.CATEGORY.replace(h.CATEGORY_PARAMETER,encodeURIComponent(a))}}}}},change:function(a){j&&c.console&&console.log(k+"Fetched "+a.items.length+" blogs"),a.sender instanceof d.data.DataSource&&(l.data(a.sender.data()),l.group({field:"category"}),m.data(a.sender.data()),m.group({field:"period"}),n.data(a.sender.data()))},error:function(b){j&&c.console&&a.type(c.console.error)===i.FUNCTION&&c.console.error(k+"Error %O",b.errors)}});o.read(),e.searchViewModel=d.observable({search:""}),e.categoriesViewModel=d.observable({_categories:l,categories:function(){return this.get("_categories").view()}}),e.archiveViewModel=d.observable({_archive:m,archive:function(){return this.get("_archive").view()}}),e.listViewModel=d.observable({list:n}),e.detailViewModel=d.observable({contentUrl:"",title:"",author:"",pubDate:Date.now()}),d.data.binders.widget.url=d.data.Binder.extend({init:function(a,b,c){d.data.Binder.fn.init.call(this,a.element[0],b,c)},refresh:function(){var b=this,c=b.bindings.url.get(),e=a(b.element).data("kendoMarkDown");e instanceof d.ui.MarkDown&&e.url(c)}})}(jQuery);
//# sourceMappingURL=dist/js/memba.blog.map